## ğŸ›¡ï¸ Policy Evaluation

| **Environments** | **Success** | **Omitted** | **Failed** | **Failed (Blocking)** | **Failed (Warning)** | **Failed (Recommend)** |
|--------------|---------|---------|--------|---------|---------|---------|
{{range $env, $sum := .PolicyEvaluation.EnvironmentSummary}}| `{{ $env }}` | `{{ $sum.PolicyCounts.TotalSuccess }}`âœ… | `{{ $sum.PolicyCounts.TotalOmitted }}`â­ï¸ | `{{ $sum.PolicyCounts.TotalFailed }}`âŒ | `{{ $sum.PolicyCounts.BlockingFailedCount }}`ğŸš« | `{{ $sum.PolicyCounts.WarningFailedCount }}`âš ï¸ | `{{ $sum.PolicyCounts.RecommendFailedCount }}`ğŸ’¡ |
{{ end }}

<details> <summary> Policy Evaluation Matrix: </summary>

| Policy Name | stg | prod |
|-------------|-----|------|
{{range $policy := .PolicyEvaluation.PolicyMatrix.stg.BlockingPolicies}}| {{$policy.PolicyName}} | {{if $policy.IsPassing}}âœ… PASS{{else}}âŒ FAIL{{end}} | {{range $prodPolicy := $.PolicyEvaluation.PolicyMatrix.prod.BlockingPolicies}}{{if eq $prodPolicy.PolicyId $policy.PolicyId}}{{if $prodPolicy.IsPassing}}âœ… PASS{{else}}âŒ FAIL{{end}}{{end}}{{end}} |
{{end -}}
{{range $policy := .PolicyEvaluation.PolicyMatrix.stg.WarningPolicies}}| {{$policy.PolicyName}} | {{if $policy.IsPassing}}âœ… PASS{{else}}âŒ FAIL{{end}} | {{range $prodPolicy := $.PolicyEvaluation.PolicyMatrix.prod.WarningPolicies}}{{if eq $prodPolicy.PolicyId $policy.PolicyId}}{{if $prodPolicy.IsPassing}}âœ… PASS{{else}}âŒ FAIL{{end}}{{end}}{{end}} |
{{end -}}
{{range $policy := .PolicyEvaluation.PolicyMatrix.stg.RecommendPolicies}}| {{$policy.PolicyName}} | {{if $policy.IsPassing}}âœ… PASS{{else}}âŒ FAIL{{end}} | {{range $prodPolicy := $.PolicyEvaluation.PolicyMatrix.prod.RecommendPolicies}}{{if eq $prodPolicy.PolicyId $policy.PolicyId}}{{if $prodPolicy.IsPassing}}âœ… PASS{{else}}âŒ FAIL{{end}}{{end}}{{end}} |
{{end}}

</details>

<details> <summary> Failing Policies Details: </summary>

#### ğŸš« BLOCKING Policies |{{range $env, $sum := .PolicyEvaluation.EnvironmentSummary}} `{{$env}}`: `{{$sum.PolicyCounts.BlockingFailedCount}}`âŒ |{{end}}

##### [`stg`] environment 

{{- if gt .PolicyEvaluation.EnvironmentSummary.stg.PolicyCounts.BlockingFailedCount 0 }}

{{range $policy := .PolicyEvaluation.PolicyMatrix.stg.BlockingPolicies}}{{if not $policy.IsPassing}}
* Policy `{{$policy.PolicyName}}`{{if $policy.ExternalLink}} ([ğŸ“– Learn more]({{$policy.ExternalLink}})){{end}} failed with the following messages:
{{range $msg := $policy.FailMessages}}  * {{$msg}}
{{end}}
{{end}}{{end}}

{{else}}
* None! ğŸ™Œ
{{end}}

{{- if gt .PolicyEvaluation.EnvironmentSummary.prod.PolicyCounts.BlockingFailedCount 0 }}
##### [`prod`] environment 

{{range $policy := .PolicyEvaluation.PolicyMatrix.prod.BlockingPolicies}}{{if not $policy.IsPassing}}
* Policy `{{$policy.PolicyName}}`{{if $policy.ExternalLink}} ([ğŸ“– Learn more]({{$policy.ExternalLink}})){{end}} failed with the following messages:
{{range $msg := $policy.FailMessages}}  * {{$msg}}
{{end}}
{{end}}{{end}}
{{else}}
* None! ğŸ™Œ
{{end}}

#### âš ï¸ WARNING Policies | {{range $env, $sum := .PolicyEvaluation.EnvironmentSummary}} `{{$env}}`: `{{$sum.PolicyCounts.WarningFailedCount}}`âŒ |{{end}}

{{- if gt .PolicyEvaluation.EnvironmentSummary.stg.PolicyCounts.WarningFailedCount 0 }}
##### [`stg`] environment 

{{range $policy := .PolicyEvaluation.PolicyMatrix.stg.WarningPolicies}}{{if not $policy.IsPassing}}
* Policy `{{$policy.PolicyName}}`{{if $policy.ExternalLink}} ([ğŸ“– Learn more]({{$policy.ExternalLink}})){{end}} failed with the following messages:
{{range $msg := $policy.FailMessages}}  * {{$msg}}
{{end}}
{{end}}{{end}}
{{else}}
* None! ğŸ™Œ
{{end}}

{{- if gt .PolicyEvaluation.EnvironmentSummary.prod.PolicyCounts.WarningFailedCount 0 }}
##### [`prod`] environment 

{{range $policy := .PolicyEvaluation.PolicyMatrix.prod.WarningPolicies}}{{if not $policy.IsPassing}}
* Policy `{{$policy.PolicyName}}`{{if $policy.ExternalLink}} ([ğŸ“– Learn more]({{$policy.ExternalLink}})){{end}} failed with the following messages:
{{range $msg := $policy.FailMessages}}  * {{$msg}}
{{end}}
{{end}}{{end}}
{{else}}
* None! ğŸ™Œ
{{end}}

#### ğŸ’¡ RECOMMEND Policies | {{range $env, $sum := .PolicyEvaluation.EnvironmentSummary}} `{{$env}}`: `{{$sum.PolicyCounts.RecommendFailedCount}}`âŒ |{{end}}

{{- if gt .PolicyEvaluation.EnvironmentSummary.stg.PolicyCounts.RecommendFailedCount 0 }}
##### [`stg`] environment 

{{range $policy := .PolicyEvaluation.PolicyMatrix.stg.RecommendPolicies}}{{if not $policy.IsPassing}}
* Policy `{{$policy.PolicyName}}`{{if $policy.ExternalLink}} ([ğŸ“– Learn more]({{$policy.ExternalLink}})){{end}} failed with the following messages:
{{range $msg := $policy.FailMessages}}  * {{$msg}}
{{end}}
{{end}}{{end}}
{{else}}
* None! ğŸ™Œ
{{end}}

##### [`prod`] environment 

{{- if gt .PolicyEvaluation.EnvironmentSummary.prod.PolicyCounts.RecommendFailedCount 0 }}

{{range $policy := .PolicyEvaluation.PolicyMatrix.prod.RecommendPolicies}}{{if not $policy.IsPassing}}
* Policy `{{$policy.PolicyName}}`{{if $policy.ExternalLink}} ([ğŸ“– Learn more]({{$policy.ExternalLink}})){{end}} failed with the following messages:
{{range $msg := $policy.FailMessages}}  * {{$msg}}
{{end}}
{{end}}{{end}}
{{else}}
* None! ğŸ™Œ
{{end}}

#### â­ï¸ Omitted Policies | {{range $env, $sum := .PolicyEvaluation.EnvironmentSummary}} `{{$env}}`: `{{$sum.PolicyCounts.TotalOmittedFailed}}`âŒ |{{end}}

##### [`stg`] environment 

{{- if gt .PolicyEvaluation.EnvironmentSummary.stg.PolicyCounts.TotalOmittedFailed 0 }}

{{range $policy := .PolicyEvaluation.PolicyMatrix.stg.OverriddenPolicies}}{{if not $policy.IsPassing}}
* Policy `{{$policy.PolicyName}}`{{if $policy.ExternalLink}} ([ğŸ“– Learn more]({{$policy.ExternalLink}})){{end}} failed with the following messages:
{{range $msg := $policy.FailMessages}}  * {{$msg}}
{{end}}
{{end}}{{end}}

{{range $policy := .PolicyEvaluation.PolicyMatrix.stg.NotInEffectPolicies}}{{if not $policy.IsPassing}}
* Policy `{{$policy.PolicyName}}`{{if $policy.ExternalLink}} ([ğŸ“– Learn more]({{$policy.ExternalLink}})){{end}} failed with the following messages:
{{range $msg := $policy.FailMessages}}  * {{$msg}}
{{end}}
{{end}}{{end}}

{{else}}
* None! ğŸ™Œ
{{end}}

##### [`prod`] environment 

{{- if gt .PolicyEvaluation.EnvironmentSummary.prod.PolicyCounts.TotalOmittedFailed 0 }}

{{range $policy := .PolicyEvaluation.PolicyMatrix.prod.OverriddenPolicies}}{{if not $policy.IsPassing}}
* Policy `{{$policy.PolicyName}}`{{if $policy.ExternalLink}} ([ğŸ“– Learn more]({{$policy.ExternalLink}})){{end}} failed with the following messages:
{{range $msg := $policy.FailMessages}}  * {{$msg}}
{{end}}
{{end}}{{end}}

{{range $policy := .PolicyEvaluation.PolicyMatrix.prod.NotInEffectPolicies}}{{if not $policy.IsPassing}}
* Policy `{{$policy.PolicyName}}`{{if $policy.ExternalLink}} ([ğŸ“– Learn more]({{$policy.ExternalLink}})){{end}} failed with the following messages:
{{range $msg := $policy.FailMessages}}  * {{$msg}}
{{end}}
{{end}}{{end}}

{{else}}
* None! ğŸ™Œ
{{end}}

</details>
